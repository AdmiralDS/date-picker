import{j as e}from"./typography.es-DJ4WRfsu.js";import{i as pu,j as _,C as L,k as W,Y as N}from"./index-DUrvFc95.js";import{r as s}from"./index-RYns6xqu.js";import{g as mu,u as Y,r as fu}from"./index-DnXc0ZDD.js";import{Y as H}from"./index-rLJdUzAE.js";import{Y as B}from"./index-CMIGvJsC.js";import{W as Eu,a as yu,T as I}from"./common-C0nfkXAM.js";import"./index-DisOlbzP.js";import"./index-DjVRa9xT.js";import"./ChevronRightOutline-4h1Amxbj.js";import"./index-BQaZqJLe.js";import"./DropdownProvider.es-DMHOw4-n.js";const V=({viewModeValue:i,defaultViewModeValue:g,onViewModeChange:d,dateRangeValue:o,defaultDateRangeValue:c,onDateRangeValueChange:D,selectedDateRangeValue:O,defaultSelectedDateRangeValue:A,onSelectedDateRangeValueChange:F,activeDateValue:Z,defaultActiveDateValue:K,onActiveDateValueChange:R,cell:n,locale:r=fu,prevButtonProps:b,nextButtonProps:k,...C})=>{const[J,U]=s.useState(g||"months"),p=i||J,j=u=>{U(u),d==null||d(u)},[Q,X]=s.useState(g||"months"),m=i||Q,x=u=>{X(u),d==null||d(u)},[uu,eu]=s.useState((c==null?void 0:c[0])||mu(r==null?void 0:r.localeName)),a=(o==null?void 0:o[0])||uu,f=u=>{eu(u),D==null||D([u,t])},[au,tu]=s.useState((c==null?void 0:c[1])||a.add(1,"year")),t=(o==null?void 0:o[1])||au,E=u=>{tu(u),D==null||D([a,u])};s.useEffect(()=>{Y(a,t,"year")&&E(a.add(1,"year"))},[a]),s.useEffect(()=>{Y(t,a,"year")&&f(t.subtract(1,"year"))},[t]);const[nu,ru]=s.useState(K),M=Z||nu,P=u=>{ru(u),R==null||R(u)},[lu,su]=s.useState(A),l=O||lu,q=u=>{su(u),F==null||F(u)},[y,iu]=s.useState(),T=u=>{iu(u)},du=u=>{const h=a.year(u.year());f(h),j("months")},ou=u=>{const h=t.year(u.year());E(h),x("months")},cu=u=>{switch(u.target.dataset.panelTargetType){case"left":f(p==="months"?a.subtract(1,"year"):a.subtract(B,"year"));break;case"right":f(p==="months"?a.add(1,"year"):a.add(B,"year"));break;case"year":j(p==="years"?"months":"years");break}},Du=u=>{switch(u.target.dataset.panelTargetType){case"left":E(m==="months"?t.subtract(1,"year"):t.subtract(B,"year"));break;case"right":E(m==="months"?t.add(1,"year"):t.add(B,"year"));break;case"year":x(m==="years"?"months":"years");break}},w=(()=>{if(!(!y||!l)){if(l[0]&&y.isSame(l[0],"month"))return l[1];if(l[1]&&y.isSame(l[1],"month"))return l[0]}})();return e.jsxs(pu,{children:[e.jsxs(_,{children:[e.jsx(H,{date:a,viewMode:p,locale:r,onClick:cu,prevButtonProps:b,nextButtonProps:k}),e.jsxs(L,{children:[e.jsx(W,{...C,cell:n==null?void 0:n.monthCell,dateValue:a,selectedDateRangeValue:l,defaultSelectedDateRangeValue:A,onSelectedDateRangeValueChange:q,activeDateRangeEndValue:y,onActiveDateRangeEndValueChange:T,activeDateValue:M,onActiveDateValueChange:P,locale:r,$isVisible:p==="months"}),e.jsx(N,{...C,cell:n==null?void 0:n.yearCell,dateValue:a,selectedDateValue:w,onSelectedDateValueChange:du,locale:r,$isVisible:p==="years"})]})]}),e.jsxs(_,{children:[e.jsx(H,{date:t,viewMode:m,locale:r,onClick:Du,prevButtonProps:b,nextButtonProps:k}),e.jsxs(L,{children:[e.jsx(W,{...C,cell:n==null?void 0:n.monthCell,dateValue:t,selectedDateRangeValue:l,defaultSelectedDateRangeValue:A,onSelectedDateRangeValueChange:q,activeDateRangeEndValue:y,onActiveDateRangeEndValueChange:T,activeDateValue:M,onActiveDateValueChange:P,locale:r,$isVisible:m==="months"}),e.jsx(N,{...C,cell:n==null?void 0:n.yearCell,dateValue:t,selectedDateValue:w,onSelectedDateValueChange:ou,locale:r,$isVisible:m==="years"})]})]})]})};try{V.displayName="MonthRangeDoublePickerCalendar",V.__docgenInfo={description:"",displayName:"MonthRangeDoublePickerCalendar",props:{locale:{defaultValue:{value:`{
  localeName: 'ru',
  localeText: {
    backwardText: 'Назад',
    forwardText: 'Вперед',
    nextMonthText: 'Следующий месяц',
    previousMonthText: 'Предыдущий месяц',
    returnText: 'Вернуться',
    selectYearText: 'Выбор года',
    selectMonthText: 'Выбор месяца',
  },
}`},description:"",name:"locale",required:!1,type:{name:"CalendarLocaleProps"}},dateAttributes:{defaultValue:null,description:"Коллбэк на определение аттрибутов даты (disabled, isHoliday, hidden)",name:"dateAttributes",required:!1,type:{name:"((currentDate: Dayjs) => DateAttributes)"}},activeDateValue:{defaultValue:null,description:"Активная дата (hover)",name:"activeDateValue",required:!1,type:{name:"Dayjs"}},defaultActiveDateValue:{defaultValue:null,description:"Активная дата (hover) по умолчанию",name:"defaultActiveDateValue",required:!1,type:{name:"Dayjs"}},onActiveDateValueChange:{defaultValue:null,description:"Коллбэк на изменение активной даты",name:"onActiveDateValueChange",required:!1,type:{name:"((date?: Dayjs) => void)"}},selectedDateRangeValue:{defaultValue:null,description:"Выбранное значение диапазона дат",name:"selectedDateRangeValue",required:!1,type:{name:"DateRange"}},defaultSelectedDateRangeValue:{defaultValue:null,description:"Выбранное значение диапазона дат по умолчанию",name:"defaultSelectedDateRangeValue",required:!1,type:{name:"DateRange"}},onSelectedDateRangeValueChange:{defaultValue:null,description:"Коллбэк на изменение выбранного диапазона дат",name:"onSelectedDateRangeValueChange",required:!1,type:{name:"((dateRange: DateRange) => void)"}},dateRangeValue:{defaultValue:null,description:"Выбранное значение диапазона дат",name:"dateRangeValue",required:!1,type:{name:"[Dayjs, Dayjs]"}},defaultDateRangeValue:{defaultValue:null,description:"Выбранное значение диапазона дат по умолчанию",name:"defaultDateRangeValue",required:!1,type:{name:"[Dayjs, Dayjs] | undefined"}},onDateRangeValueChange:{defaultValue:null,description:"Коллбэк на изменение выбранного диапазона дат",name:"onDateRangeValueChange",required:!1,type:{name:"((dateRange: [Dayjs, Dayjs]) => void) | undefined"}},viewModeValue:{defaultValue:null,description:"Экран выбора дат, месяцев, лет",name:"viewModeValue",required:!1,type:{name:"enum",value:[{value:'"dates"'},{value:'"months"'},{value:'"years"'}]}},defaultViewModeValue:{defaultValue:null,description:"Режим отображения по умолчанию",name:"defaultViewModeValue",required:!1,type:{name:"enum",value:[{value:'"dates"'},{value:'"months"'},{value:'"years"'}]}},onViewModeChange:{defaultValue:null,description:"Коллбэк на переключение экрана",name:"onViewModeChange",required:!1,type:{name:"((mode: CalendarViewMode) => void)"}},cell:{defaultValue:null,description:"Кастомное отображение ячеек",name:"cell",required:!1,type:{name:"СellProps"}},prevButtonProps:{defaultValue:null,description:'Параметры для кнопки панели "Назад"',name:"prevButtonProps",required:!1,type:{name:"ArrowButtonProps"}},nextButtonProps:{defaultValue:null,description:'Параметры для кнопки панели "Вперед"',name:"nextButtonProps",required:!1,type:{name:"ArrowButtonProps"}}}}}catch{}const S=i=>{const g=d=>{const o=d.target.dataset.value;console.log(`click on ${o}`)};return e.jsxs(Eu,{children:[e.jsx(V,{...i,onClick:g}),e.jsxs(yu,{children:[e.jsx(I,{font:"Subtitle/Subtitle 2",as:"div",children:"Выбор диапазона месяцев"}),e.jsxs(I,{font:"Body/Body 2 Long",as:"div",children:["Части сдвоенного календаря ведут себя независимо, то есть при взаимодействии с одной его частью, вторая не меняется. Первый пункт работает до тех пор, пока левая часть «младше» правой.",e.jsx("br",{}),e.jsx("br",{}),"В случае, когда мы меняем правую часть так, что выбранный в ней год «младше», чем в левой части, то левая часть подстраивается, отображая год, стоящий перед тем, который в правой. И наоборот."]})]})]})};try{S.displayName="MonthRangeDoublePickerCalendarSimpleTemplate",S.__docgenInfo={description:"",displayName:"MonthRangeDoublePickerCalendarSimpleTemplate",props:{locale:{defaultValue:null,description:"",name:"locale",required:!1,type:{name:"CalendarLocaleProps"}},dateAttributes:{defaultValue:null,description:"Коллбэк на определение аттрибутов даты (disabled, isHoliday, hidden)",name:"dateAttributes",required:!1,type:{name:"((currentDate: Dayjs) => DateAttributes)"}},activeDateValue:{defaultValue:null,description:"Активная дата (hover)",name:"activeDateValue",required:!1,type:{name:"Dayjs"}},defaultActiveDateValue:{defaultValue:null,description:"Активная дата (hover) по умолчанию",name:"defaultActiveDateValue",required:!1,type:{name:"Dayjs"}},onActiveDateValueChange:{defaultValue:null,description:"Коллбэк на изменение активной даты",name:"onActiveDateValueChange",required:!1,type:{name:"((date?: Dayjs) => void)"}},selectedDateRangeValue:{defaultValue:null,description:"Выбранное значение диапазона дат",name:"selectedDateRangeValue",required:!1,type:{name:"DateRange"}},defaultSelectedDateRangeValue:{defaultValue:null,description:"Выбранное значение диапазона дат по умолчанию",name:"defaultSelectedDateRangeValue",required:!1,type:{name:"DateRange"}},onSelectedDateRangeValueChange:{defaultValue:null,description:"Коллбэк на изменение выбранного диапазона дат",name:"onSelectedDateRangeValueChange",required:!1,type:{name:"((dateRange: DateRange) => void)"}},dateRangeValue:{defaultValue:null,description:"Выбранное значение диапазона дат",name:"dateRangeValue",required:!1,type:{name:"[Dayjs, Dayjs]"}},defaultDateRangeValue:{defaultValue:null,description:"Выбранное значение диапазона дат по умолчанию",name:"defaultDateRangeValue",required:!1,type:{name:"[Dayjs, Dayjs] | undefined"}},onDateRangeValueChange:{defaultValue:null,description:"Коллбэк на изменение выбранного диапазона дат",name:"onDateRangeValueChange",required:!1,type:{name:"((dateRange: [Dayjs, Dayjs]) => void) | undefined"}},viewModeValue:{defaultValue:null,description:"Экран выбора дат, месяцев, лет",name:"viewModeValue",required:!1,type:{name:"enum",value:[{value:'"dates"'},{value:'"months"'},{value:'"years"'}]}},defaultViewModeValue:{defaultValue:null,description:"Режим отображения по умолчанию",name:"defaultViewModeValue",required:!1,type:{name:"enum",value:[{value:'"dates"'},{value:'"months"'},{value:'"years"'}]}},onViewModeChange:{defaultValue:null,description:"Коллбэк на переключение экрана",name:"onViewModeChange",required:!1,type:{name:"((mode: CalendarViewMode) => void)"}},cell:{defaultValue:null,description:"Кастомное отображение ячеек",name:"cell",required:!1,type:{name:"СellProps"}},prevButtonProps:{defaultValue:null,description:'Параметры для кнопки панели "Назад"',name:"prevButtonProps",required:!1,type:{name:"ArrowButtonProps"}},nextButtonProps:{defaultValue:null,description:'Параметры для кнопки панели "Вперед"',name:"nextButtonProps",required:!1,type:{name:"ArrowButtonProps"}}}}}catch{}const hu=`import type { MouseEventHandler } from 'react';

import { T } from '@admiral-ds/react-ui';
import type { MonthRangeDoublePickerCalendarProps } from '@admiral-ds/date-picker';
import { MonthRangeDoublePickerCalendar } from '@admiral-ds/date-picker';

import { WrapperHorizontal, WrapperVertical } from '#src/stories/common.tsx';

export const MonthRangeDoublePickerCalendarSimpleTemplate = (props: MonthRangeDoublePickerCalendarProps) => {
  const handleClick: MouseEventHandler<HTMLDivElement> = (e) => {
    const clickedCell = (e.target as HTMLDivElement).dataset.value;
    console.log(\`click on \${clickedCell}\`);
  };

  return (
    <WrapperHorizontal>
      <MonthRangeDoublePickerCalendar
        {...props}
        onClick={handleClick}
        //defaultSelectedDateRangeValue={['2023-10-01T12:00:00Z', '2024-07-01T12:00:00Z']}
      />
      <WrapperVertical>
        <T font="Subtitle/Subtitle 2" as="div">
          Выбор диапазона месяцев
        </T>
        <T font="Body/Body 2 Long" as="div">
          Части сдвоенного календаря ведут себя независимо, то есть при взаимодействии с одной его частью, вторая не
          меняется. Первый пункт работает до тех пор, пока левая часть «младше» правой.
          <br />
          <br />В случае, когда мы меняем правую часть так, что выбранный в ней год «младше», чем в левой части, то
          левая часть подстраивается, отображая год, стоящий перед тем, который в правой. И наоборот.
        </T>
      </WrapperVertical>
    </WrapperHorizontal>
  );
};
`,Pu={title:"Admiral-2.1/Double Range Picker/MonthRangeDoublePickerCalendar",component:V,parameters:{docs:{source:{code:null}},design:{type:"figma",url:"https://www.figma.com/file/EGEGZsx8WhdxpmFKu8J41G/Admiral-2.1-UI-Kit?node-id=39%3A53407"}},argTypes:{locale:{control:!1}}},gu=i=>e.jsx(S,{...i}),v={render:gu,parameters:{docs:{source:{code:hu}}},name:"Сдвоенный календарь выбора месяцев"};var $,z,G;v.parameters={...v.parameters,docs:{...($=v.parameters)==null?void 0:$.docs,source:{originalSource:`{
  render: MonthRangeDoublePickerCalendarSimpleStory,
  parameters: {
    docs: {
      source: {
        code: MonthRangeDoublePickerCalendarSimpleTemplateRaw
      }
    }
  },
  name: 'Сдвоенный календарь выбора месяцев'
}`,...(G=(z=v.parameters)==null?void 0:z.docs)==null?void 0:G.source}}};const qu=["MonthRangeDoublePickerCalendarSimple"];export{v as MonthRangeDoublePickerCalendarSimple,qu as __namedExportsOrder,Pu as default};
