import{p as C,j as p,t as ke}from"./typography.es-CjQrIQMn.js";import{p as Pe}from"./index.es-Shta5itu.js";import{r as f}from"./index-CDs2tPxN.js";import{P as Ne,r as X,p as Fe,T as fe,I as Le,S as je,a as Re}from"./ChevronRightOutline-BFEwPjnF.js";import{g as ge,l as Oe,s as ee}from"./utils-B_ZJ_ERX.js";import{C as We,r as ye}from"./index-B0XozSxi.js";import{S as He,C as qe,D as $e,M as Ye,Y as ze}from"./calendarStyle-4FInB9Su.js";import{a as te}from"./constants-C6vCpwtL.js";import{W as Ge,a as ne,T as ae}from"./common-DpnS3vu6.js";import{u as Ue,D as Ke,a as Ze}from"./DropdownProvider.es-Dczk-0Um.js";import{m as Xe,d as Je}from"./ru-lGojcqRe.js";import"./tslib.es6-CRos2fHm.js";import"./index-B-yFm4aN.js";import"./mixins-0kl9vljp.js";import"./index-CB9F3xGI.js";import"./index-C11fHoN7.js";import"./index-fVtI0-nO.js";import"./index-DEwUQJgp.js";import"./index-BqXkOSH9.js";const Qe=(e,t)=>{const n=f.useCallback(a=>{e.every(u=>u.current&&!u.current.contains(a.target))&&t(a)},[t,e]);f.useEffect(()=>(document.addEventListener("mousedown",n,!0),document.addEventListener("touchstart",n),()=>{document.removeEventListener("mousedown",n,!0),document.removeEventListener("touchstart",n)}),[n])};function et(e,t){const n=f.useRef(null),a=f.useRef(e);return f.useEffect(()=>{a.current=e},[e]),f.useEffect(()=>(n.current=window.setInterval(()=>a.current(),t),()=>window.clearInterval(n.current||0)),[t]),n}const tt=C.div`
  pointer-events: initial;
  margin: 8px 0;
  flex: 0 0 auto;
  ${e=>e.$alignSelf?`align-self: ${e.$alignSelf};`:""};
  max-width: calc(100vw - 32px);
  opacity: 0;
  transition-delay: 200ms;
  transition-property: opacity;

  &:focus-visible {
    border: 2px solid blue;
  }

  ${e=>e.$dropContainerCssMixin}
`,nt=C.div`
  pointer-events: none;
  height: 100%;
  flex: 0 0 auto;
`,at=C(Ne)`
  display: flex;
  flex-direction: ${e=>e.$reverse?"column-reverse":"column"};
  flex-wrap: nowrap;
`,ve=f.forwardRef(({targetRef:e,targetElement:t,onClickOutside:n=()=>null,className:a="",alignSelf:u,dropContainerCssMixin:s,...r},l)=>{const o=f.useRef(null),[i,c]=f.useState(!1),d=t??(e==null?void 0:e.current),{addDropdown:m,removeDropdown:g,dropdowns:S}=Ue(o),{rootRef:v}=f.useContext(Ke);Qe([o],h=>{Ze(h,S)&&n(h)}),f.useLayoutEffect(()=>{var h;o.current!==document.activeElement&&((h=o==null?void 0:o.current)==null||h.focus())},[]);const D=f.useCallback(()=>{const h=o.current;if(h&&d){const y=h.getBoundingClientRect(),x=d.getBoundingClientRect(),V=window.innerHeight,T=window.innerWidth;if(V-y.bottom<0&&x.top>V-x.bottom?i||c(!0):(x.bottom+(x.top-y.top)<V-8||x.top<V-x.bottom)&&i&&c(!1),u&&u!=="auto")return;const E=y.right-y.left,b=T-x.left>=E,_=x.right-16>=E,P=E>x.width;if(_||b)h.style.transform="translateX(0)",_&&b?h.style.alignSelf="flex-end":P&&!_&&b?h.style.alignSelf="flex-start":P&&!b&&_&&(h.style.alignSelf="flex-end");else{h.style.alignSelf="center";const B=(T-y.width)/2-(x.left-(E-x.width)/2);h.style.transform=`translateX(${B}px)`}}},[i,e,t]);return et(D,100),f.useEffect(()=>{o.current&&(o.current.style.opacity="1")},[]),f.useLayoutEffect(()=>(m==null||m(o),()=>{g==null||g(o)}),[]),p.jsx(p.Fragment,{children:p.jsxs(at,{targetElement:d,$reverse:i,rootRef:v,children:[p.jsx(nt,{}),p.jsx(tt,{ref:X(l,o),...r,className:a+" dropdown-container",$alignSelf:u,$dropContainerCssMixin:s})]})})});ve.displayName="DropdownContainer";const De=C(ve)`
  box-shadow: var(--admiral-box-shadow-Shadow08, ${e=>Fe(e.theme.shadow["Shadow 08"])});
  border-radius: var(--admiral-border-radius-Medium, ${e=>Xe(e.theme.shape)});
  overflow: hidden;
  width: max-content;
`;De.displayName="StyledDropdownContainer";function ue(e){const{anchorOffset:t=0,focusOffset:n=0}=e.ownerDocument.getSelection()||{},a=Math.min(t,n),u=Math.max(t,n);return[a,u]}function ut(e,[t,n]){var a,u;const s=e.ownerDocument,r=s.createRange();r.setStart(e.firstChild||e,Math.min(t,((a=e.textContent)===null||a===void 0?void 0:a.length)||0)),r.setEnd(e.lastChild||e,Math.min(n,((u=e.textContent)===null||u===void 0?void 0:u.length)||0));const l=s.getSelection();l&&(l.removeAllRanges(),l.addRange(r))}class st{constructor(t){this.element=t,this.maxLength=1/0}get value(){return this.element.innerText.replace(/\n\n$/,`
`)}set value(t){this.element.innerHTML=t.replace(/\n$/,`

`)}get selectionStart(){return ue(this.element)[0]}get selectionEnd(){return ue(this.element)[1]}setSelectionRange(t,n){ut(this.element,[t||0,n||0])}select(){this.setSelectionRange(0,this.value.length)}}function rt(e){const t=new st(e);return new Proxy(e,{get(n,a){if(a in t)return t[a];const u=n[a];return typeof u=="function"?u.bind(n):u},set(n,a,u,s){return Reflect.set(a in t?t:n,a,u,s)}})}const ot=e=>e.isContentEditable?rt(e):e.querySelector("input,textarea")||e,J={mask:/^.*$/,preprocessors:[],postprocessors:[],plugins:[],overwriteMode:"shift"};class it{constructor(){this.now=null,this.past=[],this.future=[]}undo(){const t=this.past.pop();t&&this.now&&(this.future.push(this.now),this.updateElement(t,"historyUndo"))}redo(){const t=this.future.pop();t&&this.now&&(this.past.push(this.now),this.updateElement(t,"historyRedo"))}updateHistory(t){if(!this.now){this.now=t;return}const n=this.now.value!==t.value,a=this.now.selection.some((u,s)=>u!==t.selection[s]);!n&&!a||(n&&(this.past.push(this.now),this.future=[]),this.now=t)}updateElement(t,n){this.now=t,this.updateElementState(t,{inputType:n,data:null})}}function lt(e,...t){return t.every(({value:n})=>n===e.value)}function ct(e,...t){return t.every(({value:n,selection:a})=>n===e.value&&a[0]===e.selection[0]&&a[1]===e.selection[1])}function dt({value:e,selection:t},n,a){const[u,s]=t,r=typeof a=="function"?a({value:e,selection:t}):a;return{value:e,selection:r==="replace"?[u,u+n.length]:[u,s]}}function R(e){return typeof e=="string"}function se(e,t,n,a){let u="";for(let s=t.length;s<e.length;s++){const r=e[s],l=(a==null?void 0:a.value[s])===r;if(!R(r)||r===n&&!l)return u;u+=r}return u}function xe(e,t){return Array.isArray(t)?e.length===t.length&&Array.from(e).every((n,a)=>{const u=t[a];return R(u)?n===u:n.match(u)}):t.test(e)}function pt(e,t,n){let a=null,u=null;const s=Array.from(e.value).reduce((l,o,i)=>{const c=se(t,l,o,n),d=l+c,m=t[d.length];return R(m)?d+m:o.match(m)?(a===null&&i>=e.selection[0]&&(a=d.length),u===null&&i>=e.selection[1]&&(u=d.length),d+o):d},""),r=se(t,s,"",n);return{value:xe(s+r,t)?s+r:s,selection:[a??s.length,u??s.length]}}function mt({value:e,selection:t},n){const[a,u]=t;let s=a,r=u;return{value:Array.from(e).reduce((o,i,c)=>{const d=o+i;return a===c&&(s=o.length),u===c&&(r=o.length),d.match(n)?d:o},""),selection:[s,r]}}function F(e,t,n=null){if(xe(e.value,t))return e;const{value:a,selection:u}=Array.isArray(t)?pt(e,t,n):mt(e,t);return{selection:u,value:Array.isArray(t)?a.slice(0,t.length):a}}function re(e,t){if(!Array.isArray(t))return e;const[n,a]=e.selection,u=[],s=Array.from(e.value).reduce((r,l,o)=>{const i=t[o];return o===n&&u.push(r.length),o===a&&u.push(r.length),R(i)&&i===l?r:r+l},"");return u.length<2&&u.push(...new Array(2-u.length).fill(s.length)),{value:s,selection:[u[0],u[1]]}}class O{constructor(t,n){this.initialElementState=t,this.maskOptions=n,this.value="",this.selection=[0,0];const{value:a,selection:u}=F(this.initialElementState,this.getMaskExpression(this.initialElementState));this.value=a,this.selection=u}addCharacters([t,n],a){const{value:u}=this,s=this.getMaskExpression({value:u.slice(0,t)+a+u.slice(n),selection:[t+a.length,t+a.length]}),r={value:u,selection:[t,n]},l=re(r,s),[o,i]=dt(l,a,this.maskOptions.overwriteMode).selection,c=l.value.slice(0,o)+a,d=c.length,m=F({value:c+l.value.slice(i),selection:[d,d]},s,r);if(u.slice(0,o)===F({value:c,selection:[d,d]},s,r).value||ct(this,m))throw new Error("Invalid mask value");this.value=m.value,this.selection=m.selection}deleteCharacters([t,n]){if(t===n||!n)return;const{value:a}=this,u=this.getMaskExpression({value:a.slice(0,t)+a.slice(n),selection:[t,t]}),s={value:a,selection:[t,n]},r=re(s,u),[l,o]=r.selection,i=r.value.slice(0,l)+r.value.slice(o),c=F({value:i,selection:[l,l]},u,s);this.value=c.value,this.selection=c.selection}getMaskExpression(t){const{mask:n}=this.maskOptions;return typeof n=="function"?n(t):n}}class ht{constructor(t){this.element=t,this.listeners=[]}listen(t,n,a){const u=n;this.element.addEventListener(t,u,a),this.listeners.push(()=>this.element.removeEventListener(t,u))}destroy(){this.listeners.forEach(t=>t())}}const I={CTRL:1,ALT:2,SHIFT:4,META:8},A={Y:89,Z:90};function M(e,t,n){return e.ctrlKey===!!(t&I.CTRL)&&e.altKey===!!(t&I.ALT)&&e.shiftKey===!!(t&I.SHIFT)&&e.metaKey===!!(t&I.META)&&e.keyCode===n}function ft(e){return M(e,I.CTRL,A.Y)||M(e,I.CTRL|I.SHIFT,A.Z)||M(e,I.META|I.SHIFT,A.Z)}function gt(e){return M(e,I.CTRL,A.Z)||M(e,I.META,A.Z)}function yt({value:e,selection:t},n){const[a,u]=t;if(a!==u)return[a,u];const s=n?e.slice(a).indexOf(`
`)+1||e.length:e.slice(0,u).lastIndexOf(`
`)+1;return[n?a:s,n?s:u]}function vt({value:e,selection:t},n){const[a,u]=t;return a!==u?[a,u]:(n?[a,u+1]:[a-1,u]).map(r=>Math.min(Math.max(r,0),e.length))}const Dt=/\s+$/g,xt=/^\s+/g,oe=/\s/;function Et({value:e,selection:t},n){const[a,u]=t;if(a!==u)return[a,u];if(n){const o=e.slice(a),[i]=o.match(xt)||[""],c=o.trimStart().search(oe);return[a,c!==-1?a+i.length+c:e.length]}const s=e.slice(0,u),[r]=s.match(Dt)||[""],l=s.trimEnd().split("").reverse().findIndex(o=>o.match(oe));return[l!==-1?u-r.length-l:0,u]}function j(e=[]){return(t,...n)=>e.reduce((a,u)=>Object.assign(Object.assign({},a),u(a,...n)),t)}function St(e,t){const n=Object.assign(Object.assign({},J),t),a=j(n.preprocessors),u=j(n.postprocessors),s=typeof e=="string"?{value:e,selection:[0,0]}:e,{elementState:r}=a({elementState:s,data:""},"validation"),l=new O(r,n),{value:o,selection:i}=u(l,s);return typeof e=="string"?o:{value:o,selection:i}}class wt extends it{constructor(t,n){super(),this.element=t,this.maskitoOptions=n,this.isTextArea=this.element.nodeName==="TEXTAREA",this.eventListener=new ht(this.element),this.options=Object.assign(Object.assign({},J),this.maskitoOptions),this.preprocessor=j(this.options.preprocessors),this.postprocessor=j(this.options.postprocessors),this.teardowns=this.options.plugins.map(a=>a(this.element,this.options)),this.updateHistory(this.elementState),this.eventListener.listen("keydown",a=>{if(ft(a))return a.preventDefault(),this.redo();if(gt(a))return a.preventDefault(),this.undo()}),this.eventListener.listen("beforeinput",a=>{var u;const s=a.inputType.includes("Forward");switch(this.updateHistory(this.elementState),a.inputType){case"historyUndo":return a.preventDefault(),this.undo();case"historyRedo":return a.preventDefault(),this.redo();case"deleteByCut":case"deleteContentBackward":case"deleteContentForward":return this.handleDelete({event:a,isForward:s,selection:vt(this.elementState,s)});case"deleteWordForward":case"deleteWordBackward":return this.handleDelete({event:a,isForward:s,selection:Et(this.elementState,s),force:!0});case"deleteSoftLineBackward":case"deleteSoftLineForward":case"deleteHardLineBackward":case"deleteHardLineForward":return this.handleDelete({event:a,isForward:s,selection:yt(this.elementState,s),force:!0});case"insertCompositionText":return;case"insertLineBreak":case"insertParagraph":return this.handleEnter(a);case"insertFromPaste":case"insertText":case"insertFromDrop":default:return this.handleInsert(a,a.data||((u=a.dataTransfer)===null||u===void 0?void 0:u.getData("text/plain"))||"")}}),this.eventListener.listen("input",({inputType:a})=>{a!=="insertCompositionText"&&(this.ensureValueFitsMask(),this.updateHistory(this.elementState))}),this.eventListener.listen("compositionend",()=>{this.ensureValueFitsMask(),this.updateHistory(this.elementState)})}get elementState(){const{value:t,selectionStart:n,selectionEnd:a}=this.element;return{value:t,selection:[n||0,a||0]}}get maxLength(){const{maxLength:t}=this.element;return t===-1?1/0:t}destroy(){this.eventListener.destroy(),this.teardowns.forEach(t=>t==null?void 0:t())}updateElementState({value:t,selection:n},a={inputType:"insertText",data:null}){const u=this.elementState.value;this.updateValue(t),this.updateSelectionRange(n),u!==t&&this.dispatchInputEvent(a)}updateSelectionRange([t,n]){var a;const{element:u}=this;u.matches(":focus")&&(u.selectionStart!==t||u.selectionEnd!==n)&&((a=u.setSelectionRange)===null||a===void 0||a.call(u,t,n))}updateValue(t){this.element.value=t}ensureValueFitsMask(){this.updateElementState(St(this.elementState,this.options))}dispatchInputEvent(t={inputType:"insertText",data:null}){globalThis.InputEvent&&this.element.dispatchEvent(new InputEvent("input",Object.assign(Object.assign({},t),{bubbles:!0,cancelable:!1})))}handleDelete({event:t,selection:n,isForward:a,force:u=!1}){const s={value:this.elementState.value,selection:n},[r,l]=s.selection,{elementState:o}=this.preprocessor({elementState:s,data:""},a?"deleteForward":"deleteBackward"),i=new O(o,this.options),[c,d]=o.selection;i.deleteCharacters([c,d]);const m=this.postprocessor(i,s);if(!(s.value.slice(0,r)+s.value.slice(l)===m.value&&!u&&!this.element.isContentEditable)){if(t.preventDefault(),lt(s,o,i,m))return this.updateSelectionRange(a?[d,d]:[c,c]);this.updateElementState(m,{inputType:t.inputType,data:null}),this.updateHistory(m)}}handleInsert(t,n){const a=this.elementState,{elementState:u,data:s=n}=this.preprocessor({data:n,elementState:a},"insert"),r=new O(u,this.options);try{r.addCharacters(u.selection,s)}catch{return t.preventDefault()}const[l,o]=u.selection,i=a.value.slice(0,l)+n+a.value.slice(o),c=this.postprocessor(r,a);if(c.value.length>this.maxLength)return t.preventDefault();(i!==c.value||this.element.isContentEditable)&&(t.preventDefault(),this.updateElementState(c,{data:n,inputType:t.inputType}),this.updateHistory(c))}handleEnter(t){(this.isTextArea||this.element.isContentEditable)&&this.handleInsert(t,`
`)}}function Ct(e,t,n){const a=Math.min(Number(n),Math.max(Number(t),Number(e)));return e instanceof Date?new Date(a):a}function bt(e){return e.replaceAll(/\W/g,"").length}const Ee=e=>{var t,n,a;return{day:((t=e.match(/d/g))===null||t===void 0?void 0:t.length)||0,month:((n=e.match(/m/g))===null||n===void 0?void 0:n.length)||0,year:((a=e.match(/y/g))===null||a===void 0?void 0:a.length)||0}};function It(e){return{day:String(e.getDate()).padStart(2,"0"),month:String(e.getMonth()+1).padStart(2,"0"),year:String(e.getFullYear()).padStart(4,"0"),hours:String(e.getHours()).padStart(2,"0"),minutes:String(e.getMinutes()).padStart(2,"0"),seconds:String(e.getSeconds()).padStart(2,"0"),milliseconds:String(e.getMilliseconds()).padStart(3,"0")}}function Vt(e,t){return e.length<t.length?!1:e.split(/\D/).every(n=>!n.match(/^0+$/))}function Se(e,t,n){const a=bt(t);return e.replace(n,"").match(new RegExp(`(\\D*\\d[^\\d\\s]*){1,${a}}`,"g"))||[]}function Q(e,t){const n=t.replaceAll(/[^dmy]/g,""),a=e.replaceAll(/\D+/g,""),u={day:a.slice(n.indexOf("d"),n.lastIndexOf("d")+1),month:a.slice(n.indexOf("m"),n.lastIndexOf("m")+1),year:a.slice(n.indexOf("y"),n.lastIndexOf("y")+1)};return Object.fromEntries(Object.entries(u).filter(([s,r])=>!!r).sort(([s],[r])=>t.toLowerCase().indexOf(s[0])>t.toLowerCase().indexOf(r[0])?1:-1))}function Tt(e,t){var n,a,u,s,r,l,o;const i=((n=e.year)===null||n===void 0?void 0:n.length)===2?`20${e.year}`:e.year,c=new Date(Number(i??"0"),Number((a=e.month)!==null&&a!==void 0?a:"1")-1,Number((u=e.day)!==null&&u!==void 0?u:"1"),Number((s=void 0)!==null&&s!==void 0?s:"0"),Number((r=void 0)!==null&&r!==void 0?r:"0"),Number((l=void 0)!==null&&l!==void 0?l:"0"),Number((o=void 0)!==null&&o!==void 0?o:"0"));return c.setFullYear(Number(i??"0")),c}const we=", ";function k({day:e,month:t,year:n,hours:a,minutes:u,seconds:s,milliseconds:r},{dateMode:l,dateTimeSeparator:o=we,timeMode:i}){var c;const d=((c=l.match(/y/g))===null||c===void 0?void 0:c.length)===2?n==null?void 0:n.slice(-2):n;return(l+(i?o+i:"")).replaceAll(/d+/g,e??"").replaceAll(/m+/g,t??"").replaceAll(/y+/g,d??"").replaceAll(/H+/g,a??"").replaceAll("MSS",r??"").replaceAll(/M+/g,u??"").replaceAll(/S+/g,s??"").replaceAll(/^\D+/g,"").replaceAll(/\D+$/g,"")}const Ce={day:31,month:12,year:9999},_t=new Date("0001-01-01"),Bt=new Date("9999-12-31"),At=[":","."];function Mt({dateString:e,dateModeTemplate:t,offset:n,selection:[a,u]}){const s=Q(e,t),r=Object.entries(s),l={};for(const[c,d]of r){const m=k(l,{dateMode:t}),g=Ce[c],S=m.length&&1,v=n+m.length+S+Ee(t)[c],D=v>=a&&v===u;if(D&&Number(d)>Number(g))return{validatedDateString:"",updatedSelection:[a,u]};if(D&&Number(d)<1)return{validatedDateString:"",updatedSelection:[a,u]};l[c]=d}const o=k(l,{dateMode:t}),i=o.length-e.length;return{validatedDateString:o,updatedSelection:[a+i,u+i]}}const be=/[\\^$.*+?()[\]{}|]/g,kt=new RegExp(be.source);function Ie(e){return e&&kt.test(e)?e.replaceAll(be,"\\$&"):e}function W(e,t,n=0){return Number(e.padEnd(t.length,"0"))<=Number(t)?{validatedSegmentValue:e,prefixedZeroesCount:n}:e.endsWith("0")?W(`0${e.slice(0,t.length-1)}`,t,n+1):W(`${e.slice(0,t.length-1)}0`,t,n)}function ie(e){return e.replaceAll(/[０-９]/g,t=>String.fromCharCode(t.charCodeAt(0)-65248))}function Pt({dateModeTemplate:e,dateSegmentSeparator:t,splitFn:n,uniteFn:a}){return({value:u,selection:s})=>{var r;const[l,o]=s,{dateStrings:i,restPart:c=""}=n(u),d=[];let m=0;i.forEach(S=>{const v=Q(S,e),h=Object.entries(v).reduce((y,[x,V])=>{const{validatedSegmentValue:T,prefixedZeroesCount:E}=W(V,`${Ce[x]}`);return m+=E,Object.assign(Object.assign({},y),{[x]:T})},{});d.push(k(h,{dateMode:e}))});const g=a(d,u)+(!((r=i[i.length-1])===null||r===void 0)&&r.endsWith(t)?t:"")+c;return m&&g[o+1]===t&&m++,{selection:[l+m,o+m],value:g}}}function Nt(){return({elementState:e,data:t})=>{const{value:n,selection:a}=e;return{elementState:{selection:a,value:ie(n)},data:ie(t)}}}function Ft(e,t){const n=Ee(t);return Object.fromEntries(Object.entries(e).map(([a,u])=>{const s=n[a];return[a,u.length===s&&u.match(/^0+$/)?"1".padStart(s,"0"):u]}))}function Lt({dateModeTemplate:e,min:t=_t,max:n=Bt,rangeSeparator:a="",dateSegmentSeparator:u="."}){return({value:s,selection:r})=>{const l=a&&s.endsWith(a),o=Se(s,e,a);let i="";for(const c of o){i+=i?a:"";const d=Q(c,e);if(!Vt(c,e)){const S=Ft(d,e),v=k(S,{dateMode:e}),D=c.endsWith(u)?u:"";i+=v+D;continue}const m=Tt(d),g=Ct(m,t,n);i+=k(It(g),{dateMode:e})}return{selection:r,value:i+(l?a:"")}}}function jt({dateModeTemplate:e,dateSegmentsSeparator:t,rangeSeparator:n="",dateTimeSeparator:a=we}){return({elementState:u,data:s})=>{const r=n?new RegExp(`${n}|-`):a,l=s.split(r),o=s.includes(a)?[l[0]]:l;if(o.every(i=>i.trim().split(/\D/).filter(Boolean).length===e.split(t).length)){const i=o.map(c=>Rt(c,e,t)).join(n);return{elementState:u,data:`${i}${s.includes(a)&&a+l[1]||""}`}}return{elementState:u,data:s}}}function Rt(e,t,n){const a=e.split(/\D/).filter(Boolean),u=t.split(n);return a.map((r,l)=>l===u.length-1?r:r.padStart(u[l].length,"0")).join(n)}function Ot({dateModeTemplate:e,dateSegmentsSeparator:t,rangeSeparator:n=""}){return({elementState:a,data:u})=>{const{value:s,selection:r}=a;if(u===t)return{elementState:a,data:r[0]===s.length?u:""};const l=u.replaceAll(new RegExp(`[^\\d${Ie(t)}${n}]`,"g"),"");if(!l)return{elementState:a,data:""};const[o,i]=r;let c=i+u.length;const d=s.slice(0,o)+l+s.slice(c),m=Se(d,e,n);let g="";const S=!!n&&d.includes(n);for(const D of m){const{validatedDateString:h,updatedSelection:y}=Mt({dateString:D,dateModeTemplate:e,offset:g.length,selection:[o,c]});if(D&&!h)return{elementState:a,data:""};c=y[1],g+=S&&!g?h+n:h}const v=g.slice(o,c);return{elementState:{selection:r,value:g.slice(0,o)+v.split(t).map(D=>"0".repeat(D.length)).join(t)+g.slice(c)},data:v}}}function Wt(){return({elementState:e},t)=>{const{value:n,selection:a}=e;if(!n||Ht(n,a))return{elementState:e};const[u,s]=a,r=n.slice(u,s).replaceAll(/\d/g,"0"),l=n.slice(0,u)+r+n.slice(s);return t==="validation"||t==="insert"&&u===s?{elementState:{selection:a,value:l}}:{elementState:{selection:t==="deleteBackward"||t==="insert"?[u,u]:[s,s],value:l}}}}function Ht(e,[t,n]){return n===e.length}function qt({mode:e,separator:t=".",max:n,min:a}){const u=e.split("/").join(t);return Object.assign(Object.assign({},J),{mask:Array.from(u).map(s=>s===t?s:/\d/),overwriteMode:"replace",preprocessors:[Nt(),Wt(),jt({dateModeTemplate:u,dateSegmentsSeparator:t}),Ot({dateModeTemplate:u,dateSegmentsSeparator:t})],postprocessors:[Pt({dateModeTemplate:u,dateSegmentSeparator:t,splitFn:s=>({dateStrings:[s]}),uniteFn:([s])=>s}),Lt({min:a,max:n,dateModeTemplate:u,dateSegmentSeparator:t})]})}new RegExp(`[${At.map(Ie).join("")}]$`);const le=typeof window<"u"?f.useLayoutEffect:f.useEffect;function $t(e){return e&&typeof e=="object"&&"then"in e}const Yt=({options:e=null,elementPredicate:t=ot}={})=>{const[n,a]=f.useState(null),[u,s]=f.useState(null),r=f.useCallback(o=>{a(o)},[]),l=f.useRef(t);return l.current=t,le(()=>{if(!n)return;const o=t,i=o(n);$t(i)?i.then(c=>{l.current===o&&s(c)}):s(i)},[n,t,l]),le(()=>{if(!u||!e)return;const o=new wt(u,e);return()=>{o.destroy()}},[e,u]),r},zt=C.div.withConfig({displayName:"MonthNavigationPanelWidget__MonthNavigationPanelWrapper",componentId:"sc-a9d285bb-0"})(["box-sizing:border-box;width:","PX;height:32px;padding:0 12px;display:flex;justify-content:space-between;background-color:",";"],We,e=>e.theme.color["Special/Elevated BG"]),Gt=C.div.withConfig({displayName:"MonthNavigationPanelWidget__MonthYearWrapper",componentId:"sc-a9d285bb-1"})(["display:flex;"]),Ut=C.div.withConfig({displayName:"MonthNavigationPanelWidget__TextWrapper",componentId:"sc-a9d285bb-2"})(["padding:4px 8px;border-radius:16px;cursor:pointer;color:",";"," background-color:",";&:hover{background-color:",";}"],e=>e.theme.color["Primary/Primary 60 Main"],ke["Subtitle/Subtitle 2"],e=>e.$isActive?e.theme.color["Opacity/Focus"]:e.theme.color["Special/Elevated BG"],e=>e.theme.color["Opacity/Hover"]),ce=fe(Le),de=fe(Ut),H=({viewMode:e,date:t,locale:n=ye,prevButtonProps:a,nextButtonProps:u,...s})=>{const r=(t==null?void 0:t.locale(n.localeName))||ge((n==null?void 0:n.localeName)||"ru");return p.jsxs(zt,{...s,children:[p.jsx(ce,{dimension:"lSmall",highlightFocus:!1,"data-panel-target-type":"left",renderContent:()=>e==="dates"?n==null?void 0:n.localeText.previousMonthText:n==null?void 0:n.localeText.backwardText,...a,children:p.jsx(je,{})}),p.jsxs(Gt,{...s,children:[p.jsx(de,{"data-panel-target-type":"month",$isActive:e==="months",renderContent:()=>e==="months"?n==null?void 0:n.localeText.returnText:n.localeText.selectMonthText,children:Oe(r.format("MMMM"))}),p.jsx(de,{"data-panel-target-type":"year",$isActive:e==="years",renderContent:()=>e==="years"?n==null?void 0:n.localeText.returnText:n.localeText.selectYearText,children:r.year()})]}),p.jsx(ce,{dimension:"lSmall",highlightFocus:!1,"data-panel-target-type":"right",renderContent:()=>e==="dates"?n==null?void 0:n.localeText.nextMonthText:n==null?void 0:n.localeText.forwardText,...u,children:p.jsx(Re,{})})]})};try{H.displayName="MonthNavigationPanelWidget",H.__docgenInfo={description:"",displayName:"MonthNavigationPanelWidget",props:{viewMode:{defaultValue:null,description:"",name:"viewMode",required:!1,type:{name:"enum",value:[{value:'"dates"'},{value:'"months"'},{value:'"years"'}]}},date:{defaultValue:null,description:"Дата",name:"date",required:!1,type:{name:"Dayjs"}},locale:{defaultValue:{value:`{
  localeName: 'ru',
  localeText: {
    backwardText: 'Назад',
    forwardText: 'Вперед',
    nextMonthText: 'Следующий месяц',
    previousMonthText: 'Предыдущий месяц',
    returnText: 'Вернуться',
    selectYearText: 'Выбор года',
    selectMonthText: 'Выбор месяца',
  },
}`},description:"",name:"locale",required:!1,type:{name:"CalendarLocaleProps"}},prevButtonProps:{defaultValue:null,description:"",name:"prevButtonProps",required:!1,type:{name:"ArrowButtonProps"}},nextButtonProps:{defaultValue:null,description:"",name:"nextButtonProps",required:!1,type:{name:"ArrowButtonProps"}}}}}catch{}const q=({viewModeValue:e,defaultViewModeValue:t,onViewModeChange:n,dateValue:a,defaultDateValue:u,onDateValueChange:s,selectedDateValue:r,defaultSelectedDateValue:l,onSelectedDateValueChange:o,cell:i,locale:c=ye,prevButtonProps:d,nextButtonProps:m,className:g,style:S,...v})=>{const[D,h]=f.useState(t||"dates"),y=e||D,x=w=>{h(w),n==null||n(w)},[V,T]=f.useState(u||ge(c==null?void 0:c.localeName)),E=a||V,b=w=>{T(w),s==null||s(w)},[_,P]=f.useState(l),B=r||_,Te=w=>{P(w),o==null||o(w)},_e=w=>{Te(w)},Be=w=>{const N=E.month(w.month());b(N),x("dates")},Ae=w=>{const N=E.year(w.year());b(N),x("dates")},Me=w=>{switch(w.preventDefault(),w.target.dataset.panelTargetType){case"left":b(y==="dates"?E.subtract(1,"month"):y==="months"?E.subtract(1,"year"):E.subtract(te,"year"));break;case"right":b(y==="dates"?E.add(1,"month"):y==="months"?E.add(1,"year"):E.add(te,"year"));break;case"month":x(y==="months"?"dates":"months");break;case"year":x(y==="years"?"dates":"years");break}};return p.jsxs(He,{className:g,style:S,children:[p.jsx(H,{date:E,viewMode:y,locale:c,onMouseDown:Me,prevButtonProps:d,nextButtonProps:m}),p.jsxs(qe,{children:[p.jsx($e,{...v,cell:i==null?void 0:i.dateCell,dateValue:E,selectedDateValue:B,onSelectedDateValueChange:_e,locale:c,$isVisible:y==="dates"}),p.jsx(Ye,{...v,cell:i==null?void 0:i.monthCell,dateValue:ee(E.startOf("month")),selectedDateValue:B,onSelectedDateValueChange:Be,locale:c,$isVisible:y==="months"}),p.jsx(ze,{...v,cell:i==null?void 0:i.yearCell,dateValue:ee(E.startOf("year")),selectedDateValue:B,onSelectedDateValueChange:Ae,locale:c,$isVisible:y==="years"})]})]})};try{q.displayName="DatePickerCalendar",q.__docgenInfo={description:"",displayName:"DatePickerCalendar",props:{defaultDateValue:{defaultValue:null,description:"Дата для отображения на экране по умолчанию",name:"defaultDateValue",required:!1,type:{name:"Dayjs"}},onDateValueChange:{defaultValue:null,description:"Коллбэк на изменение даты отображения на экране",name:"onDateValueChange",required:!1,type:{name:"((date: Dayjs) => void)"}},dateAttributes:{defaultValue:null,description:"Коллбэк на определение аттрибутов даты (disabled, isHoliday, hidden)",name:"dateAttributes",required:!1,type:{name:"((currentDate: Dayjs) => DateAttributes)"}},dateValue:{defaultValue:null,description:"Дата для отображения на экране",name:"dateValue",required:!1,type:{name:"Dayjs"}},activeDateValue:{defaultValue:null,description:"Активная дата (hover)",name:"activeDateValue",required:!1,type:{name:"Dayjs"}},defaultActiveDateValue:{defaultValue:null,description:"Активная дата (hover) по умолчанию",name:"defaultActiveDateValue",required:!1,type:{name:"Dayjs"}},onActiveDateValueChange:{defaultValue:null,description:"Коллбэк на изменение активной даты",name:"onActiveDateValueChange",required:!1,type:{name:"((date?: Dayjs) => void)"}},locale:{defaultValue:{value:`{
  localeName: 'ru',
  localeText: {
    backwardText: 'Назад',
    forwardText: 'Вперед',
    nextMonthText: 'Следующий месяц',
    previousMonthText: 'Предыдущий месяц',
    returnText: 'Вернуться',
    selectYearText: 'Выбор года',
    selectMonthText: 'Выбор месяца',
  },
}`},description:"",name:"locale",required:!1,type:{name:"CalendarLocaleProps"}},selectedDateValue:{defaultValue:null,description:"Выбранное значение даты в формате ISO",name:"selectedDateValue",required:!1,type:{name:"Dayjs"}},defaultSelectedDateValue:{defaultValue:null,description:"Выбранное значение даты по умолчанию в формате ISO",name:"defaultSelectedDateValue",required:!1,type:{name:"Dayjs"}},onSelectedDateValueChange:{defaultValue:null,description:"Коллбэк на изменение выбранной даты",name:"onSelectedDateValueChange",required:!1,type:{name:"((date: Dayjs) => void)"}},viewModeValue:{defaultValue:null,description:"Экран выбора дат, месяцев, лет",name:"viewModeValue",required:!1,type:{name:"enum",value:[{value:'"dates"'},{value:'"months"'},{value:'"years"'}]}},defaultViewModeValue:{defaultValue:null,description:"Режим отображения по умолчанию",name:"defaultViewModeValue",required:!1,type:{name:"enum",value:[{value:'"dates"'},{value:'"months"'},{value:'"years"'}]}},onViewModeChange:{defaultValue:null,description:"Коллбэк на переключение экрана",name:"onViewModeChange",required:!1,type:{name:"((mode: CalendarViewMode) => void)"}},cell:{defaultValue:null,description:"Кастомное отображение ячеек",name:"cell",required:!1,type:{name:"СellProps"}},prevButtonProps:{defaultValue:null,description:'Параметры для кнопки панели "Назад"',name:"prevButtonProps",required:!1,type:{name:"ArrowButtonProps"}},nextButtonProps:{defaultValue:null,description:'Параметры для кнопки панели "Вперед"',name:"nextButtonProps",required:!1,type:{name:"ArrowButtonProps"}}}}}catch{}const $=C.div.withConfig({displayName:"InputBox__FocusBox",componentId:"sc-e440a99c-0"})(["cursor:text;display:inline-flex;overflow:hidden;flex-wrap:nowrap;flex-direction:row;align-items:stretch;height:40px;padding:0;padding-inline-start:16px;padding-inline-end:16px;& *{"," line-height:40px;}&[data-size='xl']{height:56px;& *{line-height:56px;}}&[data-size='s']{height:32px;padding-inline-start:12px;padding-inline-end:12px;& *{"," line-height:32px;}}box-sizing:border-box;border-radius:4px;background:transparent;transform:translate3d(0,0,0);box-shadow:0px 0px 0px 1px "," inset;&:hover:not(:focus-within){box-shadow:0px 0px 0px 1px "," inset;}&:focus-within{box-shadow:0px 0px 0px 2px "," inset;}transition:box-shadow 0.3s ease-in-out;"],e=>e.theme.typography["Body/Body 1 Long"],e=>e.theme.typography["Body/Body 2 Long"],e=>e.theme.color["Neutral/Neutral 40"],e=>e.theme.color["Neutral/Neutral 60"],e=>e.theme.color["Primary/Primary 60 Main"]),Y=$;try{$.displayName="FocusBox",$.__docgenInfo={description:"",displayName:"FocusBox",props:{theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"DefaultTheme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"void | WebTarget"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"void | WebTarget"}}}}}catch{}try{Y.displayName="InputBox",Y.__docgenInfo={description:"",displayName:"InputBox",props:{theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"DefaultTheme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"void | WebTarget"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"void | WebTarget"}}}}}catch{}const z=C.input.withConfig({displayName:"InputLine__StyledInputLine",componentId:"sc-f3f49cc9-0"})(["border:none;outline:none;appearance:none;background-image:none;background-color:transparent;-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none;text-overflow:ellipsis;padding:0;color:",";::placeholder{color:",";}"],e=>e.$isTmpValue?e.theme.color["Neutral/Neutral 30"]:e.theme.color["Neutral/Neutral 90"],e=>e.theme.color["Neutral/Neutral 50"]),Ve=C.span.withConfig({displayName:"InputLine__Visible",componentId:"sc-f3f49cc9-1"})(["color:",";transition:color 0.3s ease-in-out;"],e=>e.theme.color["Neutral/Neutral 30"]),Kt=C.span.withConfig({displayName:"InputLine__Invisible",componentId:"sc-f3f49cc9-2"})(["color:transparent;"]),Zt=C.div.withConfig({displayName:"InputLine__InputLineContainer",componentId:"sc-f3f49cc9-3"})(["position:relative;display:inline-block;&:focus-within ","{color:",";}"],Ve,e=>e.theme.color["Neutral/Neutral 50"]),Xt=C.div.withConfig({displayName:"InputLine__MaskBox",componentId:"sc-f3f49cc9-4"})(["position:absolute;pointer-events:none;top:0;bottom:0;left:0;right:0;"]),G=f.forwardRef((e,t)=>{const{className:n,dataPlaceholder:a,tmpValue:u,...s}=e,r={className:n},l=e.placeholder,o=f.useRef(null),i=f.useRef(null),c=f.useRef(null);f.useEffect(()=>{const m=o.current,g=i.current,S=c.current;function v(){const{value:D}=this,h=D.length;g&&S&&(typeof l=="string"&&l.length>0&&D.length==0?(S.innerHTML="",g.innerHTML=""):(g.innerHTML=D,S.innerHTML=(a==null?void 0:a.substring(h))||""))}if(typeof a=="string"&&m&&g&&S)return v.apply(m),m.addEventListener("input",v),()=>m.removeEventListener("input",v)},[a,l,s.value,s.defaultValue,u]);const d=typeof u=="string";return p.jsxs(Zt,{...r,children:[p.jsx(z,{ref:X(t,o),...s,$isTmpValue:d,value:d?u:s.value}),p.jsxs(Xt,{children:[p.jsx(Kt,{ref:i}),p.jsx(Ve,{ref:c})]})]})});try{z.displayName="StyledInputLine",z.__docgenInfo={description:"",displayName:"StyledInputLine",props:{theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"DefaultTheme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"void | WebTarget"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"void | WebTarget"}}}}}catch{}try{G.displayName="InputLine",G.__docgenInfo={description:"",displayName:"InputLine",props:{dataPlaceholder:{defaultValue:null,description:"",name:"dataPlaceholder",required:!1,type:{name:"string"}},tmpValue:{defaultValue:null,description:"",name:"tmpValue",required:!1,type:{name:"string"}}}}}catch{}function U({icon:e,...t}){const n=e;return p.jsx(n,{...t})}const K=C(U).withConfig({displayName:"InputIconButton",componentId:"sc-9818fd62-0"})(["width:24px;[data-size='s'] &{width:20px;}& *[fill^='#']{fill:var(--admiral-color-Neutral_Neutral50,",");}[disabled] &&&{pointer-events:none;& *[fill^='#']{fill:var(--admiral-color-Neutral_Neutral30,",");}}&:hover{cursor:pointer;}&:hover *[fill^='#']{fill:var(--admiral-color-Primary_Primary70,",");}"],e=>e.theme.color["Neutral/Neutral 50"],e=>e.theme.color["Neutral/Neutral 30"],e=>e.theme.color["Primary/Primary 70"]);try{U.displayName="AnyIcon",U.__docgenInfo={description:"",displayName:"AnyIcon",props:{icon:{defaultValue:null,description:"",name:"icon",required:!0,type:{name:"FunctionComponent<SVGProps<SVGSVGElement>>"}}}}}catch{}try{K.displayName="InputIconButton",K.__docgenInfo={description:"",displayName:"InputIconButton",props:{theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"DefaultTheme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"void | WebTarget"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"void | WebTarget"}}}}}catch{}const Jt=e=>f.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",focusable:!1,...e},f.createElement("path",{fill:"#717681",fillRule:"evenodd",d:"M8.14 1.94c.35 0 .65.3.65.65v1.39h2.56V2.59c0-.35.29-.65.65-.65.35 0 .64.3.64.65v1.39h2.56V2.59c0-.35.29-.65.65-.65.35 0 .65.3.65.65v1.39h.5c1.64 0 3 1.34 3 3v10.13c0 1.67-1.34 3-3 3H7c-1.67 0-3-1.33-3-3V6.98c0-1.66 1.33-3 3-3h.48V2.59c0-.35.3-.65.66-.65m-.66 4.91V5.28H7c-.94 0-1.71.76-1.71 1.7v2.36H18.7V6.98c0-.94-.77-1.7-1.7-1.7h-.5v1.57c0 .36-.3.65-.65.65-.36 0-.65-.29-.65-.65V5.28h-2.56v1.57c0 .36-.29.65-.64.65-.36 0-.65-.29-.65-.65V5.28H8.79v1.57a.655.655 0 0 1-1.31 0m11.22 3.8H5.29v6.46c0 .94.77 1.7 1.71 1.7h10c.93 0 1.7-.76 1.7-1.7zM7.52 13.99c0-.74.61-1.34 1.35-1.34h2.33c.74 0 1.34.6 1.34 1.34v1.32c0 .75-.6 1.36-1.34 1.36H8.87c-.74 0-1.35-.61-1.35-1.36zm1.32-.03c-.01.01-.01.02-.01.03v1.32c0 .02 0 .03.01.04s.02.01.03.01h2.33c.01 0 .02 0 .03-.01s.02-.02.02-.04v-1.32c0-.01-.01-.02-.02-.03s-.02-.01-.03-.01H8.87c-.01 0-.02 0-.03.01"})),Z=De;try{Z.displayName="PopoverPanel",Z.__docgenInfo={description:"",displayName:"PopoverPanel",props:{theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"DefaultTheme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"void | WebTarget"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"void | WebTarget"}}}}}catch{}const Qt=qt({mode:"dd/mm/yyyy"}),en=C(q).withConfig({displayName:"DatePickerSimple.template__Calendar",componentId:"sc-3aa2b1bd-0"})(["border:none;box-shadow:none;"]),tn=()=>{const[e,t]=f.useState("11."),[n,a]=f.useState(),[u,s]=f.useState(!1),r=f.useRef(null),l=f.useRef(null),[o,i]=f.useState(!1),c=Yt({options:Qt}),d=h=>{h.preventDefault(),u&&i(y=>!y)},m=h=>{t(h.format("DD.MM.YYYY")),a(void 0),i(!1)},g=()=>{i(!1),s(!1),a(void 0)},S=()=>{i(!0),s(!0)},v=h=>{var y;h.target===h.currentTarget&&h.preventDefault(),u||(y=l.current)==null||y.focus()},D=h=>{t(h.currentTarget.value),a(void 0)};return p.jsxs(Ge,{children:[p.jsxs(ne,{children:[p.jsxs(Y,{ref:r,onMouseDown:v,children:[p.jsx(G,{ref:X(c,l),value:e,onInput:D,placeholder:"Введите дату",dataPlaceholder:"дд.мм.гггг",onBlur:g,onFocus:S,tmpValue:n}),p.jsx(K,{icon:Jt,onMouseDown:d})]}),o&&p.jsx(Z,{targetElement:r.current,alignSelf:"auto",children:p.jsx(en,{selectedDateValue:Je(e,"DD.MM.YYYY"),onSelectedDateValueChange:m,onActiveDateValueChange:h=>a(h?h.format("DD.MM.YYYY"):void 0)})})]}),p.jsxs(ne,{children:[p.jsx(ae,{font:"Subtitle/Subtitle 2",as:"div",children:"Выбор даты"}),p.jsxs(ae,{font:"Body/Body 2 Long",as:"div",children:["Высота календаря постоянна и состоит из шести рядов чисел. Текущий месяц начинается с первого ряда и, если его даты не заходят на шестой ряд, то там ставятся пустые ячейки (Empty).",p.jsx("br",{}),p.jsx("br",{}),"Текущая дата выделяется обводкой в виде черного кружка. Ховер на дате подсвечивается обводкой синего цвета. Выбранная дата отмечается синим кружком.",p.jsx("br",{}),"При ховере на месяце, годе, стрелках вправо/влево появляются тултипы с подсказками.",p.jsx("br",{}),p.jsx("br",{}),"Клик на месяц/год открывает экран выбора месяца/года. Вернуться на экран выбора даты можно выбрав месяц/год, либо нажав на месяц/год в шапке календаря"]})]})]})},nn=`import type { FormEventHandler, MouseEventHandler } from 'react';
import { useRef, useState } from 'react';
import { maskitoDateOptionsGenerator } from '@maskito/kit';
import { useMaskito } from '@maskito/react';

import { T, refSetter } from '@admiral-ds/react-ui';
import { DatePickerCalendar as DatePicker } from '#src/components/DatePickerCalendar';
import { InputBox } from '#src/components/Input/InputBox';
import { InputLine } from '#src/components/Input/InputLine';
import { InputIconButton } from '#src/components/InputIconButton';
//import { Separator } from '#src/components/Input';
import CalendarOutline from '@admiral-ds/icons/build/system/CalendarOutline.svg?react';

import { WrapperHorizontal, WrapperVertical } from '#src/stories/common.tsx';
import { PopoverPanel } from '#src/components/PopoverPanel.js';
import styled from 'styled-components';
import type { Dayjs } from 'dayjs';
import dayjs from 'dayjs';

const dateOptions = maskitoDateOptionsGenerator({ mode: 'dd/mm/yyyy' });

const Calendar = styled(DatePicker)\`
  border: none;
  box-shadow: none;
\`;

export const DatePickerSimpleTemplate = () => {
  const [inputValue, setInputValue] = useState('11.');
  const [tmpValue, setTmpValue] = useState<string | undefined>();
  const [isFocused, setIsFocused] = useState(false);
  const inputBoxRef = useRef(null);
  const inputRef = useRef<HTMLInputElement>(null);
  const [isCalendarOpen, setCalendarOpen] = useState<boolean>(false);

  const maskedDateInputRef = useMaskito({ options: dateOptions });

  const handleInputIconButtonMouseDown: MouseEventHandler<Element> = (e) => {
    e.preventDefault();
    if (isFocused) {
      setCalendarOpen((isOpen) => !isOpen);
    }
  };

  const handleSelectedDateValueChange = (date: Dayjs) => {
    setInputValue(date.format('DD.MM.YYYY'));
    setTmpValue(undefined);
    setCalendarOpen(false);
  };

  const handleBlur = () => {
    setCalendarOpen(false);
    setIsFocused(false);
    setTmpValue(undefined);
  };

  const handleFocus = () => {
    setCalendarOpen(true);
    setIsFocused(true);
  };

  const handleInputBoxMouseDown: MouseEventHandler<Element> = (e) => {
    if (e.target === e.currentTarget) e.preventDefault();
    if (!isFocused) {
      inputRef.current?.focus();
    }
  };

  const handleInput: FormEventHandler<HTMLInputElement> = (e) => {
    setInputValue(e.currentTarget.value);
    setTmpValue(undefined);
  };

  return (
    <WrapperHorizontal>
      <WrapperVertical>
        <InputBox ref={inputBoxRef} onMouseDown={handleInputBoxMouseDown}>
          <InputLine
            ref={refSetter(maskedDateInputRef, inputRef)}
            value={inputValue}
            onInput={handleInput}
            placeholder="Введите дату"
            dataPlaceholder="дд.мм.гггг"
            onBlur={handleBlur}
            onFocus={handleFocus}
            tmpValue={tmpValue}
          />
          <InputIconButton icon={CalendarOutline} onMouseDown={handleInputIconButtonMouseDown} />
        </InputBox>
        {isCalendarOpen && (
          <PopoverPanel targetElement={inputBoxRef.current} alignSelf="auto">
            <Calendar
              selectedDateValue={dayjs(inputValue, 'DD.MM.YYYY')}
              onSelectedDateValueChange={handleSelectedDateValueChange}
              onActiveDateValueChange={(date) => setTmpValue(date ? date.format('DD.MM.YYYY') : undefined)}
            />
          </PopoverPanel>
        )}
        {/* <InputBox data-size="xl">
          <InputLine ref={maskedDateRangeInputRef} dataPlaceholder="дд.мм.гггг - дд.мм.гггг" />
          <InputIconButton icon={CalendarOutline} />
        </InputBox>
        <InputBox data-size="s">
          <InputLine ref={maskedStartDateInputRef} placeholder="дд.мм.гггг" style={{ width: 70 }} />
          <Separator style={{ width: 20 }}> – </Separator>
          <InputLine ref={maskedEndDateInputRef} placeholder="дд.мм.гггг" />
          <InputIconButton icon={CalendarOutline} />
        </InputBox> */}
      </WrapperVertical>

      <WrapperVertical>
        <T font="Subtitle/Subtitle 2" as="div">
          Выбор даты
        </T>
        <T font="Body/Body 2 Long" as="div">
          Высота календаря постоянна и состоит из шести рядов чисел. Текущий месяц начинается с первого ряда и, если его
          даты не заходят на шестой ряд, то там ставятся пустые ячейки (Empty).
          <br />
          <br />
          Текущая дата выделяется обводкой в виде черного кружка. Ховер на дате подсвечивается обводкой синего цвета.
          Выбранная дата отмечается синим кружком.
          <br />
          При ховере на месяце, годе, стрелках вправо/влево появляются тултипы с подсказками.
          <br />
          <br />
          Клик на месяц/год открывает экран выбора месяца/года. Вернуться на экран выбора даты можно выбрав месяц/год,
          либо нажав на месяц/год в шапке календаря
        </T>
      </WrapperVertical>
    </WrapperHorizontal>
  );
};
`,Cn={title:"Admiral-2.1/Date Picker/DatePicker",component:Pe,parameters:{docs:{source:{language:"tsx"}},design:{type:"figma",url:"https://www.figma.com/file/EGEGZsx8WhdxpmFKu8J41G/Admiral-2.1-UI-Kit?node-id=39%3A53407"}},argTypes:{dateValue:{control:{type:"text"}},defaultDateValue:{control:{type:"text"}},onDateValueChange:{control:!1},locale:{control:!1}}},an=e=>p.jsx(tn,{...e}),L={render:an,parameters:{docs:{source:{code:nn}}},name:"Выбор даты"};var pe,me,he;L.parameters={...L.parameters,docs:{...(pe=L.parameters)==null?void 0:pe.docs,source:{originalSource:`{
  render: DatePickerCalendarSimpleStory,
  parameters: {
    docs: {
      source: {
        code: DatePickerSimpleTemplateRaw
      }
    }
  },
  name: 'Выбор даты'
}`,...(he=(me=L.parameters)==null?void 0:me.docs)==null?void 0:he.source}}};const bn=["DatePickerCalendarSimple"];export{L as DatePickerCalendarSimple,bn as __namedExportsOrder,Cn as default};
