import{j as e}from"./tslib.es6-gXVSDp23.js";import{r as s}from"./index-uubelm5h.js";import{g as pu,x as _,r as mu}from"./index-B-lRfg65.js";import{Y as L}from"./index-BINliiCM.js";import{a as fu,b as W,C as N,e as Y,Y as H,W as yu,d as Eu,T as I}from"./common-B4QALF2I.js";import{Y as g}from"./index-MLNV-xYt.js";import"./index-K5lteAgc.js";import"./typography.es-zceevOJ_.js";import"./ChevronRightOutline-DAmKuVUD.js";import"./index-Dei0BBcc.js";import"./DropdownProvider.es-CSByVTCf.js";import"./index-DecqpaNy.js";import"./index-CEeWF_8x.js";import"./index-ClXWm04v.js";import"./index-DFy_Fcck.js";import"./index-DECRG3v1.js";import"./index-DtnkVuXW.js";import"./index-DPFgU4GL.js";const V=({viewModeValue:i,defaultViewModeValue:B,onViewModeChange:d,dateRangeValue:o,defaultDateRangeValue:D,onDateRangeValueChange:c,selectedDateRangeValue:O,defaultSelectedDateRangeValue:A,onSelectedDateRangeValueChange:F,activeDateValue:Z,defaultActiveDateValue:K,onActiveDateValueChange:S,cell:n,locale:r=mu,prevButtonProps:j,nextButtonProps:R,...C})=>{const[J,U]=s.useState(B||"months"),p=i||J,k=u=>{U(u),d==null||d(u)},[Q,X]=s.useState(B||"months"),m=i||Q,x=u=>{X(u),d==null||d(u)},[uu,eu]=s.useState((D==null?void 0:D[0])||pu(r==null?void 0:r.localeName)),a=(o==null?void 0:o[0])||uu,f=u=>{eu(u),c==null||c([u,t])},[au,tu]=s.useState((D==null?void 0:D[1])||a.add(1,"year")),t=(o==null?void 0:o[1])||au,y=u=>{tu(u),c==null||c([a,u])};s.useEffect(()=>{_(a,t,"year")&&y(a.add(1,"year"))},[a]),s.useEffect(()=>{_(t,a,"year")&&f(t.subtract(1,"year"))},[t]);const[nu,ru]=s.useState(K),M=Z||nu,P=u=>{ru(u),S==null||S(u)},[lu,su]=s.useState(A),l=O||lu,q=u=>{su(u),F==null||F(u)},[E,iu]=s.useState(),T=u=>{iu(u)},du=u=>{const h=a.year(u.year());f(h),k("months")},ou=u=>{const h=t.year(u.year());y(h),x("months")},Du=u=>{switch(u.target.dataset.panelTargetType){case"left":f(p==="months"?a.subtract(1,"year"):a.subtract(g,"year"));break;case"right":f(p==="months"?a.add(1,"year"):a.add(g,"year"));break;case"year":k(p==="years"?"months":"years");break}},cu=u=>{switch(u.target.dataset.panelTargetType){case"left":y(m==="months"?t.subtract(1,"year"):t.subtract(g,"year"));break;case"right":y(m==="months"?t.add(1,"year"):t.add(g,"year"));break;case"year":x(m==="years"?"months":"years");break}},w=(()=>{if(!(!E||!l)){if(l[0]&&E.isSame(l[0],"month"))return l[1];if(l[1]&&E.isSame(l[1],"month"))return l[0]}})();return e.jsxs(fu,{children:[e.jsxs(W,{children:[e.jsx(L,{date:a,viewMode:p,locale:r,onClick:Du,prevButtonProps:j,nextButtonProps:R}),e.jsxs(N,{children:[e.jsx(Y,{...C,cell:n==null?void 0:n.monthCell,dateValue:a,selectedDateRangeValue:l,defaultSelectedDateRangeValue:A,onSelectedDateRangeValueChange:q,activeDateRangeEndValue:E,onActiveDateRangeEndValueChange:T,activeDateValue:M,onActiveDateValueChange:P,locale:r,$isVisible:p==="months"}),e.jsx(H,{...C,cell:n==null?void 0:n.yearCell,dateValue:a,selectedDateValue:w,onSelectedDateValueChange:du,locale:r,$isVisible:p==="years"})]})]}),e.jsxs(W,{children:[e.jsx(L,{date:t,viewMode:m,locale:r,onClick:cu,prevButtonProps:j,nextButtonProps:R}),e.jsxs(N,{children:[e.jsx(Y,{...C,cell:n==null?void 0:n.monthCell,dateValue:t,selectedDateRangeValue:l,defaultSelectedDateRangeValue:A,onSelectedDateRangeValueChange:q,activeDateRangeEndValue:E,onActiveDateRangeEndValueChange:T,activeDateValue:M,onActiveDateValueChange:P,locale:r,$isVisible:m==="months"}),e.jsx(H,{...C,cell:n==null?void 0:n.yearCell,dateValue:t,selectedDateValue:w,onSelectedDateValueChange:ou,locale:r,$isVisible:m==="years"})]})]})]})};try{V.displayName="MonthRangeDoublePickerCalendar",V.__docgenInfo={description:"",displayName:"MonthRangeDoublePickerCalendar",props:{selectedDateRangeValue:{defaultValue:null,description:"Выбранное значение диапазона дат",name:"selectedDateRangeValue",required:!1,type:{name:"[Dayjs, Dayjs] | undefined"}},defaultSelectedDateRangeValue:{defaultValue:null,description:"Выбранное значение диапазона дат по умолчанию",name:"defaultSelectedDateRangeValue",required:!1,type:{name:"[Dayjs, Dayjs] | undefined"}},onSelectedDateRangeValueChange:{defaultValue:null,description:"Коллбэк на изменение выбранного диапазона дат",name:"onSelectedDateRangeValueChange",required:!1,type:{name:"((dateRange: [Dayjs, Dayjs]) => void) | undefined"}},dateAttributes:{defaultValue:null,description:"Коллбэк на определение аттрибутов даты (disabled, isHoliday, hidden)",name:"dateAttributes",required:!1,type:{name:"((currentDate: Dayjs) => DateAttributes)"}},activeDateValue:{defaultValue:null,description:"Активная дата (hover)",name:"activeDateValue",required:!1,type:{name:"Dayjs"}},defaultActiveDateValue:{defaultValue:null,description:"Активная дата (hover) по умолчанию",name:"defaultActiveDateValue",required:!1,type:{name:"Dayjs"}},onActiveDateValueChange:{defaultValue:null,description:"Коллбэк на изменение активной даты",name:"onActiveDateValueChange",required:!1,type:{name:"((date?: Dayjs) => void)"}},locale:{defaultValue:{value:`{
  localeName: 'ru',
  localeText: {
    backwardText: 'Назад',
    forwardText: 'Вперед',
    nextMonthText: 'Следующий месяц',
    previousMonthText: 'Предыдущий месяц',
    returnText: 'Вернуться',
    selectYearText: 'Выбор года',
    selectMonthText: 'Выбор месяца',
  },
}`},description:"",name:"locale",required:!1,type:{name:"CalendarLocaleProps"}},dateRangeValue:{defaultValue:null,description:"Выбранное значение диапазона дат",name:"dateRangeValue",required:!1,type:{name:"[Dayjs, Dayjs]"}},defaultDateRangeValue:{defaultValue:null,description:"Выбранное значение диапазона дат по умолчанию",name:"defaultDateRangeValue",required:!1,type:{name:"[Dayjs, Dayjs] | undefined"}},onDateRangeValueChange:{defaultValue:null,description:"Коллбэк на изменение выбранного диапазона дат",name:"onDateRangeValueChange",required:!1,type:{name:"((dateRange: [Dayjs, Dayjs]) => void) | undefined"}},viewModeValue:{defaultValue:null,description:"Экран выбора дат, месяцев, лет",name:"viewModeValue",required:!1,type:{name:"enum",value:[{value:'"dates"'},{value:'"months"'},{value:'"years"'}]}},defaultViewModeValue:{defaultValue:null,description:"Режим отображения по умолчанию",name:"defaultViewModeValue",required:!1,type:{name:"enum",value:[{value:'"dates"'},{value:'"months"'},{value:'"years"'}]}},onViewModeChange:{defaultValue:null,description:"Коллбэк на переключение экрана",name:"onViewModeChange",required:!1,type:{name:"((mode: CalendarViewMode) => void)"}},cell:{defaultValue:null,description:"Кастомное отображение ячеек",name:"cell",required:!1,type:{name:"СellProps"}},prevButtonProps:{defaultValue:null,description:'Параметры для кнопки панели "Назад"',name:"prevButtonProps",required:!1,type:{name:"ArrowButtonProps"}},nextButtonProps:{defaultValue:null,description:'Параметры для кнопки панели "Вперед"',name:"nextButtonProps",required:!1,type:{name:"ArrowButtonProps"}}}}}catch{}const b=i=>{const B=d=>{const o=d.target.dataset.value;console.log(`click on ${o}`)};return e.jsxs(yu,{children:[e.jsx(V,{...i,onClick:B}),e.jsxs(Eu,{children:[e.jsx(I,{font:"Subtitle/Subtitle 2",as:"div",children:"Выбор диапазона месяцев"}),e.jsxs(I,{font:"Body/Body 2 Long",as:"div",children:["Части сдвоенного календаря ведут себя независимо, то есть при взаимодействии с одной его частью, вторая не меняется. Первый пункт работает до тех пор, пока левая часть «младше» правой.",e.jsx("br",{}),e.jsx("br",{}),"В случае, когда мы меняем правую часть так, что выбранный в ней год «младше», чем в левой части, то левая часть подстраивается, отображая год, стоящий перед тем, который в правой. И наоборот."]})]})]})};try{b.displayName="MonthRangeDoublePickerCalendarSimpleTemplate",b.__docgenInfo={description:"",displayName:"MonthRangeDoublePickerCalendarSimpleTemplate",props:{selectedDateRangeValue:{defaultValue:null,description:"Выбранное значение диапазона дат",name:"selectedDateRangeValue",required:!1,type:{name:"[Dayjs, Dayjs] | undefined"}},defaultSelectedDateRangeValue:{defaultValue:null,description:"Выбранное значение диапазона дат по умолчанию",name:"defaultSelectedDateRangeValue",required:!1,type:{name:"[Dayjs, Dayjs] | undefined"}},onSelectedDateRangeValueChange:{defaultValue:null,description:"Коллбэк на изменение выбранного диапазона дат",name:"onSelectedDateRangeValueChange",required:!1,type:{name:"((dateRange: [Dayjs, Dayjs]) => void) | undefined"}},dateAttributes:{defaultValue:null,description:"Коллбэк на определение аттрибутов даты (disabled, isHoliday, hidden)",name:"dateAttributes",required:!1,type:{name:"((currentDate: Dayjs) => DateAttributes)"}},activeDateValue:{defaultValue:null,description:"Активная дата (hover)",name:"activeDateValue",required:!1,type:{name:"Dayjs"}},defaultActiveDateValue:{defaultValue:null,description:"Активная дата (hover) по умолчанию",name:"defaultActiveDateValue",required:!1,type:{name:"Dayjs"}},onActiveDateValueChange:{defaultValue:null,description:"Коллбэк на изменение активной даты",name:"onActiveDateValueChange",required:!1,type:{name:"((date?: Dayjs) => void)"}},locale:{defaultValue:null,description:"",name:"locale",required:!1,type:{name:"CalendarLocaleProps"}},dateRangeValue:{defaultValue:null,description:"Выбранное значение диапазона дат",name:"dateRangeValue",required:!1,type:{name:"[Dayjs, Dayjs]"}},defaultDateRangeValue:{defaultValue:null,description:"Выбранное значение диапазона дат по умолчанию",name:"defaultDateRangeValue",required:!1,type:{name:"[Dayjs, Dayjs] | undefined"}},onDateRangeValueChange:{defaultValue:null,description:"Коллбэк на изменение выбранного диапазона дат",name:"onDateRangeValueChange",required:!1,type:{name:"((dateRange: [Dayjs, Dayjs]) => void) | undefined"}},viewModeValue:{defaultValue:null,description:"Экран выбора дат, месяцев, лет",name:"viewModeValue",required:!1,type:{name:"enum",value:[{value:'"dates"'},{value:'"months"'},{value:'"years"'}]}},defaultViewModeValue:{defaultValue:null,description:"Режим отображения по умолчанию",name:"defaultViewModeValue",required:!1,type:{name:"enum",value:[{value:'"dates"'},{value:'"months"'},{value:'"years"'}]}},onViewModeChange:{defaultValue:null,description:"Коллбэк на переключение экрана",name:"onViewModeChange",required:!1,type:{name:"((mode: CalendarViewMode) => void)"}},cell:{defaultValue:null,description:"Кастомное отображение ячеек",name:"cell",required:!1,type:{name:"СellProps"}},prevButtonProps:{defaultValue:null,description:'Параметры для кнопки панели "Назад"',name:"prevButtonProps",required:!1,type:{name:"ArrowButtonProps"}},nextButtonProps:{defaultValue:null,description:'Параметры для кнопки панели "Вперед"',name:"nextButtonProps",required:!1,type:{name:"ArrowButtonProps"}}}}}catch{}const hu=`import type { MouseEventHandler } from 'react';

import { T } from '@admiral-ds/react-ui';
import type { MonthRangeDoublePickerCalendarProps } from '@admiral-ds/date-picker';
import { MonthRangeDoublePickerCalendar } from '@admiral-ds/date-picker';

import { WrapperHorizontal, WrapperVertical } from '#src/stories/common.tsx';

export const MonthRangeDoublePickerCalendarSimpleTemplate = (props: MonthRangeDoublePickerCalendarProps) => {
  const handleClick: MouseEventHandler<HTMLDivElement> = (e) => {
    const clickedCell = (e.target as HTMLDivElement).dataset.value;
    console.log(\`click on \${clickedCell}\`);
  };

  return (
    <WrapperHorizontal>
      <MonthRangeDoublePickerCalendar
        {...props}
        onClick={handleClick}
        //defaultSelectedDateRangeValue={['2023-10-01T12:00:00Z', '2024-07-01T12:00:00Z']}
      />
      <WrapperVertical>
        <T font="Subtitle/Subtitle 2" as="div">
          Выбор диапазона месяцев
        </T>
        <T font="Body/Body 2 Long" as="div">
          Части сдвоенного календаря ведут себя независимо, то есть при взаимодействии с одной его частью, вторая не
          меняется. Первый пункт работает до тех пор, пока левая часть «младше» правой.
          <br />
          <br />В случае, когда мы меняем правую часть так, что выбранный в ней год «младше», чем в левой части, то
          левая часть подстраивается, отображая год, стоящий перед тем, который в правой. И наоборот.
        </T>
      </WrapperVertical>
    </WrapperHorizontal>
  );
};
`,Wu={title:"Admiral-2.1/Double Range Picker/MonthRangeDoublePickerCalendar",component:V,parameters:{docs:{source:{code:null}},design:{type:"figma",url:"https://www.figma.com/file/EGEGZsx8WhdxpmFKu8J41G/Admiral-2.1-UI-Kit?node-id=39%3A53407"}},argTypes:{locale:{control:!1}}},Bu=i=>e.jsx(b,{...i}),v={render:Bu,parameters:{docs:{source:{code:hu}}},name:"Сдвоенный календарь выбора месяцев"};var $,z,G;v.parameters={...v.parameters,docs:{...($=v.parameters)==null?void 0:$.docs,source:{originalSource:`{
  render: MonthRangeDoublePickerCalendarSimpleStory,
  parameters: {
    docs: {
      source: {
        code: MonthRangeDoublePickerCalendarSimpleTemplateRaw
      }
    }
  },
  name: 'Сдвоенный календарь выбора месяцев'
}`,...(G=(z=v.parameters)==null?void 0:z.docs)==null?void 0:G.source}}};const Nu=["MonthRangeDoublePickerCalendarSimple"];export{v as MonthRangeDoublePickerCalendarSimple,Nu as __namedExportsOrder,Wu as default};
